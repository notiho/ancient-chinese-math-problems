"""
今有圓田周三百九十六步欲為方問得幾何
術曰周自相乗十二而一所得開方除之即得方
答曰 a步
"""

"""
Suppose there is a circular field with a circumference of 396 bu.
It is desired to convert it into a square field.
Question: how large is the side length of the square?

The procedure says: Multiply the circumference by itself.
Divide the result by 12.
Take the square root of the result, and that is the side length of the square.

Answer: *a* bu.
"""

# 圓田周三百九十六步
圓周 = 396

# 周自相乘
積 = 圓周 * 圓周

# 十二而一
積除十二 = Fraction(積, 12)

# 所得開方
# To calculate the square root manually, we use an iterative method (Babylonian method).
def 開方(x, iterations=10):
    guess = x / 2
    for _ in range(iterations):
        guess = (guess + x / guess) / 2
    return guess

a = 開方(積除十二)  # 得方 (side length of the square)
"""
Variable 'a' has wrong value. Expected: 26178/229, Actual: 338243832830802163210017304776515248327601080610445892585259689300040229134126798232777269015359685551587181854253255264595283224403684293913918500868248821600452576876215999814555116700269320859203935778948970791599568977061657332924197379180987010604808780818648300001700209421557453489960888728132667616370292743080835864058064487131353095551069062478261142473286876792319477964874416716876487830274726416181088259414434381182038981134677494780990820243502602359694896999770663689246684503276370547322589555202196278084773109309031403883057539348447360780357728480123141216142146120916956404264921759326338588425602492528509410590796847393143247585340613600716218075094896005576839287094297832107718249204324222929014956512309103244014353204084103543961375632013801278997943369752162866282905260918024533049896022403806161664152864243964825979468013573364826098751721674072934118633913461244955778090813576566416350635272659422923286383956745212875366468983767177636754583859801707898800389455819297292175063460417285332595731718210474260008525739423107191047939850417882492867224473618633547255472944497813540024362097579434683807858854746458551337742128365826431548978714745208178037275322370518992224027697899929488690259977686492109439872674391624190035143045503099972499929239769637570168360793503503093398181978332753915036970497413713185564015268026211515885039662832561813118404013820085014988234247713756813565804549958394051390827934596134846356279228375856159212123194406589223965420403252417925951861631234120383589860215397664883920393238008836843226426882836066224770076192259054091047820566429109937178544468699692491705448838226558977/2958866180857489377160652854771400410399456038270215749721776884290467704684439461206415022700226787434567944977479634292658807419569457745013145374024830688869002781390567863506313040916893805541503502857342151416223336885367292203578246992494125152233577008465392702790933428536098606021009594865910973291376436331514827331747834101492373459126144620936226641187704479522067394851470774257189854846790445903440558125931506678963184868845234040475653325880039619655572846186677965986712468592758144459668269467833964878892974446898557153229278478899548584661227383918608918928712741026812627049759162848420940399403249771620567409801986099763721184400832792122389943427114367877002265006612067583003161711482530376341464452386298119526855547262655068463347310056415489476622229062760986940664004715268840487474747222876028619985456137557684106982221902620044247314600387794517666385858513412564947573174156744940599427751322375741923586622748508062381842223922944485775064939883904170829560567473198845339346815801548362271020108006570167408672320398293333920827833938242886378127870659346273557933054030628223969359676518905132332367955584758902407118636608586541883287840559384394688494396127569978139344010253415735149085129932017307695023552383619918787816669531261239949814148908000407435800970478304856554081583936875396235780714043491498042537181049352805325896837713342171942206668002455432266403142275189537763212023313588873503670936104732680305463640133048595856857645209579542599707821375414512540566772296715828772535536153638029274265449162611102399731153666233721960468147883431043585115877216583163172448494886142154178769069738978816"""
