"""
今有圓困，高一丈三尺三寸、少半寸，容米二千斛。問︰周幾何？
術曰：置米積尺，以十二乘之，令高而一，所得，開方除之，即周。
荅曰： a丈 。
"""

"""
Suppose there is a cylindrical container with a height of 1 zhang, 3 chi, 3 cun, and half a cun, which holds 2000 hu of rice.
Question: what is the circumference of the base?

The procedure says: Place the volume of rice in cubic chi, multiply it by 12, and let the height be the divisor.
Take the square root of the result, and that is the circumference.

The answer says: *a* zhang.
"""

from fractions import Fraction

# 高一丈三尺三寸、少半寸
高 = 1 * 10 + 3 + Fraction(3, 10) + Fraction(1, 20)  # Convert to chi

# 容米二千斛
米積 = 2000 * 10  # Convert hu to cubic chi (1 hu = 10 cubic chi)

# 置米積尺，以十二乘之
積乘十二 = 米積 * 12

# 令高而一
商 = Fraction(積乘十二, 高)

# 所得，開方除之，即周
# To compute the square root, we approximate manually
# Start with an initial guess and refine using the Babylonian method
def 開方(value, iterations=10):
    guess = value / 2  # Initial guess
    for _ in range(iterations):
        guess = (guess + value / guess) / 2
    return guess

周 = 開方(商)

# Convert 周 from chi to zhang (1 zhang = 10 chi)
a = 周 / 10
"""
Variable 'a' has wrong value. Expected: 27/5, Actual: 3453800246180350668484120422450189571386628257256524405942689341488399017722331092973442043930411468556848942278073018392503940361445728379832923580633502328868003542732672373285611032671762818010816062523659910193244935190164211827647283215974216458206979759780434774784936281461113599458932341574384763669539155293641980435097848167437884046916683481896746451186632581896509238531534982410337067408297995213612533751233581513322928645235729483680867296122348425115460706373146216453720710389650359902886434333129389544549774128048366579094550552976159417515058823899616643899130205349304585254595480096396200734514877655507037240383586112208699097178288389573504883410427761559225353879661937668510794727020452081132210964835549308991200041727381852033403497174716644709061912866032718582004874839164577843506385341663796813827268617811949457774163251029431646986557774858080169449772832426444307505168498042701634164498819838130805752110456916264995792134345618488897091894137664753108101580299340152760293413665915474902061446788087498758918292144456277782905867075877804779262878567090901312822560235980535497798419359118425965032143140593712913908062311653454411537581705700298350361817846253801585055744024031651930565883546019700854549555623642606169137971983287500426538258004381791334661666767992391036077724493136570178985672291410692762364629800511823372852652474937190406339566063875254222309451524443463846313637279056603137379336833296639322730586337969678676082252162608024311278534558251092716715378225163531799766527805767312960459439510953073962921357237989481010780006591169206815745964982921203783418387880620515640627781715942388203285464707217487907812741468720942919835601287274211376201615176386788531385019046228798498362391776816535331106119710647792477891293286130818600146140723685680047007012757531306143198423205914496559660006332914275756357002744270809945423183021272144478932294191545429395931290144929022116499230307986710976266440858100663099000654081427613985853556312345475718076546079506357670702242675676098790838863354586074676215210604291909336580200082511458144479378495446899828743751033566735092891495838565126935621615669550468549730020136195978381806176942802082821109394654543429095196130524373261885359711995781528964921897300347263120655963244278878796306464494764322026881887021425865656055433225987861393555369512589214386110777801862713028864209405232289546108306114366980949811027800959358988681474107976369764481283372243482916777212614885795866956571481430810107018103296965558006306164246760691742651137347732790921917448192885621089504896760669344277616267321586110464462472746512809050241562936920106269293229658890249642829310100808115670190527220844080320780308070337119302320896568758518393130696196807852672162835766459987133892600388316438717110075889325016157522072724784784809035785194341085236367295944683521/257591915210091332186975816211019799640994869187190451694560420139261155390642929853189666809753403768139981769311867802143666161365448625182907155091575499635820103938679431931026288171108156535621510088840458750773658244679123045999801539358521429039012712758462051083643548626360905212036365858561824424290815636266954074346484194300629002021008347482389568052420105890573537570839364165303056745484021806028241766424008643946316873294986257862315755445565283241950367015878726993735222818487128988979085040933120039376319346759306560443514052018492402911017151905916123811505478814635281013707140852939808366561652842918129116944976400934954836779166495613690671316986205774834415514513057549699508229953566040990415944698806235681047974603646074787604258888043088489385106971094748245551152351273590559482217331010460795123741467135282555424341214281270182150125601587134257156450051747881309195837588173198432320425950849215056817354560296710152920622303375822273548637072829806720162552979375695480487779361704885302130711543252595772713191314126229824957382378945430763699205761072588910792776164575677321021614009872770125416675484730828012807233433065757214441912828100320460208154364970817811658495754412445365093816355609622482217023579267105229620305240080472080161149860717306196770148155538023924120316804695824414430120328003770648516779368850092941978390750027583073606054163962618988228669886223776064355040405177386085240758248492881350500566753395644820231971932265910758741766221806694052569230286023888886472028781397161559233098725456470363058342559513479192836476205101515792932472635488595312555276217265570285287020592518983336910398169641154254268139435578364138916207880852180828173045673407990903983325480383671149224528116066287961760045172036789116951869207432037777534933916978574640463184831370261765115467929418075391789130491441255384734411263679902536923835248393332333451967723684926794477818128029069026763752667244612430700821328969910722036787139702558901508363367700389930498548715200003070729037848721263867618723781240155536563108180850768960787560861710546309356771072321633111004776531716057647270064882490516356213771773333728637451835526837345194956451782351506049324796551535184269959104044756787471441601754788442002578762010604713991882370880218455422602237579100501025850137245620133013581158646582553354846866874995287565370863065780447280570055719264271390621249280030722474884406579673054972403242788483762252034413615183754945391838183858869162579045475524557322281951656174558094222788481267688918543636173238957711116082507606995416166194800590616783473854704465886586813082025363699527978589914666829962309424029759267582550749917676895415472817607150452187528050678051160362506802922235510717162468852692654554440975442016676825072029285767033806318454753680050174646541067774317777760836668088701790867735979627520"""
